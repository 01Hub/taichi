#---------------------------------#
#      general configuration      #
#---------------------------------#

# version format
version: 0.0.{build}-{branch}

# branches to build
# branches:
#   only:
#     - master

#---------------------------------#
#    environment configuration    #
#---------------------------------#

# Build worker image (VM template)
image: Visual Studio 2015

# environment variables
environment:
  #TAICHI_ROOT_DIR: C:\projects\
  
  matrix:
    - PYTHON_ROOT_DIR: "C:\\Python3.5-x64"
      PYTHON_VERSION: "3.5.x"
      PYTHON_ARCH: "64"

# clone directory
clone_folder: $(TAICHI_ROOT_DIR)

install:
  

#---------------------------------#
#       build configuration       #
#---------------------------------#

platform: x64
configuration: Release

build_script:
  # - set PYTHONPATH=%TAICHI_ROOT_DIR%/taichi/python/;%PYTHONPATH%
  - cd "C:/projects/taichi/"
  - python install.py

#  - 7z a %TAICHI_ROOT_DIR%\taichi\taichi_bin.zip %TAICHI_ROOT_DIR%/taichi/runtimes/*.dll %TAICHI_ROOT_DIR%/taichi/runtimes/Release/taichi_core.dll

#---------------------------------#
#      artifacts configuration    #
#---------------------------------#

artifacts:
  - path: taichi\taichi_bin.zip
    name: 'taichi-win-x86_64'
